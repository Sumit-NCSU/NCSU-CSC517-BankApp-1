<h1>View User</h1>

<p id="notice"><%= notice %></p>
<h3> User Overview</h3>
<table class="table table-striped">
  <tr>
    <th> User ID</th>
    <th> User Email</th>
    <th> User Name</th>
  </tr>
  <tr>
    <td> <%= @user.id %></td>
    <td> <%= @user.email %></td>
    <td> <%= @user.name %></td>
  </tr>
</table>
<h3>Sent Transactions</h3>
<% user_accounts = @user.accounts.map{|a|a.id}%>
<%= render 'transactions/transaction_table', transactions: Transaction.select{|t| user_accounts.include? t.from_account_id} %>
<br>

<h3>Received Transactions</h3>
<%= render 'transactions/transaction_table', transactions: Transaction.select{|t| user_accounts.include? t.to_account_id} %>
<br>

<%= link_to 'Destroy', @user, method: :delete, data: { confirm: 'Are you sure you want to delete this user?' } %> |
<%= link_to 'Back', :controller => :users, :action => :index_users %>

</div>